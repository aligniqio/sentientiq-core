<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SentientIQ v2 Detection Test</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0a0a0a;
            color: #fff;
        }
        
        /* Navigation */
        nav {
            background: rgba(255,255,255,0.05);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        nav a {
            color: #fff;
            text-decoration: none;
            padding: 0.5rem 1rem;
            margin: 0 0.5rem;
            transition: all 0.3s;
        }
        nav a:hover {
            background: rgba(147, 51, 234, 0.3);
        }
        .nav-cta {
            background: #9333ea;
            border-radius: 4px;
        }
        
        /* Sections */
        section {
            min-height: 80vh;
            padding: 4rem 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        #hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        #demo {
            background: rgba(147, 51, 234, 0.1);
        }
        
        #pricing {
            background: rgba(34, 197, 94, 0.1);
        }
        
        .price-card {
            border: 1px solid rgba(255,255,255,0.2);
            padding: 2rem;
            margin: 1rem;
            border-radius: 8px;
            display: inline-block;
        }
        
        .price {
            font-size: 3rem;
            font-weight: bold;
            color: #22c55e;
        }
        
        button {
            background: #9333ea;
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 4px;
            cursor: pointer;
            margin: 1rem;
        }
        
        button:hover {
            background: #7c3aed;
        }
        
        /* Debug Panel */
        #debug-panel {
            position: fixed;
            right: 20px;
            top: 20px;
            width: 400px;
            max-height: 80vh;
            background: rgba(0,0,0,0.95);
            border: 1px solid #9333ea;
            border-radius: 8px;
            padding: 1rem;
            overflow-y: auto;
            font-family: 'Monaco', monospace;
            font-size: 12px;
            z-index: 9999;
        }
        
        .emotion-entry {
            padding: 0.5rem;
            margin: 0.5rem 0;
            background: rgba(147, 51, 234, 0.1);
            border-left: 3px solid #9333ea;
            border-radius: 4px;
        }
        
        .emotion-type {
            color: #fbbf24;
            font-weight: bold;
        }
        
        .emotion-zone {
            color: #60a5fa;
        }
        
        .emotion-confidence {
            color: #34d399;
        }
        
        #current-zone {
            background: rgba(147, 51, 234, 0.3);
            padding: 0.5rem;
            border-radius: 4px;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div>
            <a href="#hero">Home</a>
            <a href="#demo">Demo</a>
            <a href="#features">Features</a>
            <a href="#pricing">Pricing</a>
            <a href="https://example.com">External</a>
        </div>
        <div>
            <a href="#demo" class="nav-cta">Try Demo</a>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="hero" class="hero">
        <h1>Test Hero Section</h1>
        <p>Scroll down to trigger zone changes</p>
        <button>Get Started</button>
    </section>

    <!-- Demo Section -->
    <section id="demo" data-section="demo">
        <h2>Interactive Demo</h2>
        <p>This is the demo zone - engagement should be detected here</p>
        <button>Try It Now</button>
        <button>Watch Video</button>
    </section>

    <!-- Features Section -->
    <section id="features" class="features">
        <h2>Features</h2>
        <p>Hover, click, and scroll to test detection</p>
        <div style="height: 200px; overflow-y: auto; border: 1px solid #333; padding: 1rem; margin: 2rem;">
            <p>Scrollable content area...</p>
            <p>Line 2</p>
            <p>Line 3</p>
            <p>Line 4</p>
            <p>Line 5</p>
            <p>Line 6</p>
            <p>Line 7</p>
            <p>Line 8</p>
            <p>Line 9</p>
            <p>Line 10</p>
        </div>
    </section>

    <!-- Pricing Section -->
    <section id="pricing" class="pricing">
        <h2>Pricing</h2>
        <div class="price-card">
            <h3>Starter</h3>
            <div class="price">$97</div>
            <p>Perfect for small teams</p>
            <button>Buy Now</button>
        </div>
        <div class="price-card">
            <h3>Growth</h3>
            <div class="price">$297</div>
            <p>For growing companies</p>
            <button>Buy Now</button>
        </div>
        <div class="price-card">
            <h3>Scale</h3>
            <div class="price">$497</div>
            <p>Enterprise ready</p>
            <button>Get Started</button>
        </div>
    </section>

    <!-- Debug Panel -->
    <div id="debug-panel">
        <h3 style="color: #9333ea; margin-bottom: 1rem;">ðŸ§  SentientIQ v2 Debug</h3>
        <div id="current-zone">Zone: <span id="zone-display">unknown</span></div>
        <div id="emotion-log"></div>
    </div>

    <!-- Load detect.js v2 -->
    <script src="/detect-v2.js" data-api-key="DEMO_KEY" data-debug="true"></script>
    
    <!-- Debug UI -->
    <script>
        const zoneDisplay = document.getElementById('zone-display');
        const emotionLog = document.getElementById('emotion-log');
        let emotionCount = 0;
        
        // Update current zone display
        setInterval(() => {
            if (window.SentientIQ) {
                zoneDisplay.textContent = SentientIQ.getCurrentZone() || 'unknown';
            }
        }, 100);
        
        // Listen for emotions
        window.addEventListener('sentientiq:emotion', (e) => {
            emotionCount++;
            const emotion = e.detail;
            
            const entry = document.createElement('div');
            entry.className = 'emotion-entry';
            entry.innerHTML = `
                <div>#${emotionCount} <span class="emotion-type">${emotion.emotion}</span></div>
                <div>Zone: <span class="emotion-zone">${emotion.zone}</span></div>
                <div>Confidence: <span class="emotion-confidence">${emotion.confidence}%</span></div>
                ${emotion.metadata ? `<div style="color: #94a3b8; margin-top: 0.25rem;">${JSON.stringify(emotion.metadata, null, 2)}</div>` : ''}
            `;
            
            emotionLog.insertBefore(entry, emotionLog.firstChild);
            
            // Keep only last 10 emotions
            while (emotionLog.children.length > 10) {
                emotionLog.removeChild(emotionLog.lastChild);
            }
        });
        
        // Test functions
        window.testRageClick = function() {
            const btn = document.querySelector('button');
            for(let i = 0; i < 5; i++) {
                setTimeout(() => btn.click(), i * 200);
            }
        };
        
        window.clearLog = function() {
            emotionLog.innerHTML = '';
            emotionCount = 0;
        };
    </script>
</body>
</html>